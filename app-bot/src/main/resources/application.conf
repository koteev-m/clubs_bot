# application.conf — параметры Ktor

# если хотите профили, можно раскомментировать:
# include file("application-${?APP_ENV}.conf")

ktor {
  deployment {
    port = 8080
    port = ${?PORT}   # если есть ENV PORT — он переопределит 8080
    host = 0.0.0.0
  }
  application {
    modules = [ com.example.bot.ApplicationKt.module ]
  }
}

  routing {
    webhook = "/webhook"
    health  = "/health"
    metrics = "/metrics"
    api     = "/api"
  }

  netty {
    requestReadTimeoutSeconds    = 15
    responseWriteTimeoutSeconds  = 15
    connectionIdleTimeoutSeconds = 45
  }
}

observability {
  prometheus           = ${?METRICS_PROMETHEUS_ENABLED}
  health-db-timeout-ms = ${?HEALTH_DB_TIMEOUT_MS}
}

tracing {
  enabled       = ${?TRACING_ENABLED}
  otlp-endpoint = ${?OTEL_EXPORTER_OTLP_ENDPOINT}
  service-name  = ${?OTEL_SERVICE_NAME}
}

log {
  json  = ${?LOG_JSON}
  level = ${?LOG_LEVEL}
}